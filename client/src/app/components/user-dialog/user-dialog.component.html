<div class="user-dialog">
  <h2 mat-dialog-title class="dialog-title">
    <mat-icon class="title-icon">{{ isEdit ? 'edit' : 'add_circle' }}</mat-icon>
    {{ isEdit ? ('editUser' | i18n) : ('addUser' | i18n) }}
  </h2>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <mat-dialog-content class="dialog-content">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>{{ 'lastName' | i18n }}</mat-label>
          <input 
            matInput 
            formControlName="lastName" 
            [placeholder]="'lastNamePlaceholder' | i18n"
            [class.is-invalid]="isFieldInvalid('lastName')">
          <mat-error *ngIf="isFieldInvalid('lastName')">
            {{ getErrorMessage('lastName') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>{{ 'firstName' | i18n }}</mat-label>
          <input 
            matInput 
            formControlName="firstName" 
            [placeholder]="'firstNamePlaceholder' | i18n"
            [class.is-invalid]="isFieldInvalid('firstName')">
          <mat-error *ngIf="isFieldInvalid('firstName')">
            {{ getErrorMessage('firstName') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>{{ 'emailAddress' | i18n }}</mat-label>
          <input 
            matInput 
            type="email" 
            formControlName="email" 
            [placeholder]="'emailPlaceholder' | i18n"
            [class.is-invalid]="isFieldInvalid('email')">
          <mat-error *ngIf="isFieldInvalid('email')">
            {{ getErrorMessage('email') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>{{ 'jsonData' | i18n }}</mat-label>
          <textarea 
            matInput 
            formControlName="jsonData" 
            rows="4"
            [placeholder]="'jsonDataPlaceholder' | i18n"
            [class.is-invalid]="isFieldInvalid('jsonData')"></textarea>
          <mat-hint>{{ 'jsonDataHint' | i18n }}</mat-hint>
          <mat-error *ngIf="isFieldInvalid('jsonData')">
            {{ getErrorMessage('jsonData') }}
          </mat-error>
        </mat-form-field>
      </div>
    </mat-dialog-content>

    <mat-dialog-actions align="end" class="dialog-actions">
      <button 
        mat-button 
        type="button" 
        (click)="onCancel()" 
        class="cancel-button">
        <mat-icon>cancel</mat-icon>
        {{ 'cancel' | i18n }}
      </button>
      <button 
        mat-raised-button 
        color="primary" 
        type="submit" 
        [disabled]="userForm.invalid"
        class="submit-button">
        <mat-icon>{{ isEdit ? 'save' : 'add_circle' }}</mat-icon>
        {{ isEdit ? ('update' | i18n) : ('add' | i18n) }}
      </button>
    </mat-dialog-actions>
  </form>
</div>
