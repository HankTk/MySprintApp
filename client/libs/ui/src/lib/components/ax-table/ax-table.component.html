<div class="ax-table-container">
  <table mat-table [dataSource]="paginatedData" class="ax-table" matSort (matSortChange)="onSortChange($event)">
    @for (column of displayedColumns; track column) {
      <ng-container [matColumnDef]="column">
        <th mat-header-cell *matHeaderCellDef [mat-sort-header]="showSort ? column : ''">
          @if (headerTemplate) {
            <ng-container *ngTemplateOutlet="headerTemplate; context: { $implicit: column }"></ng-container>
          } @else {
            {{ column }}
          }
        </th>
        <td mat-cell *matCellDef="let row">
          @if (rowTemplate) {
            <ng-container *ngTemplateOutlet="rowTemplate; context: { $implicit: row, column: column }"></ng-container>
          } @else {
            {{ row[column] }}
          }
        </td>
      </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  @if (showPaginator) {
    <mat-paginator
      [length]="sortedData.length"
      [pageSize]="currentPageSize"
      [pageSizeOptions]="pageSizeOptions"
      [pageIndex]="currentPage"
      (page)="onPageChange($event)">
    </mat-paginator>
  }
</div>

